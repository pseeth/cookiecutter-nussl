

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>src.model package &mdash; Cookiecutter for nussl  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="src.model.extras package" href="src.model.extras.html" />
    <link rel="prev" title="src.dataset package" href="src.dataset.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Cookiecutter for nussl
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting started</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../using_scaper.html">Using Scaper</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="runners.html">runners package</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts.html">scripts package</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="src.html">src package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="src.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="src.algorithms.html">src.algorithms package</a></li>
<li class="toctree-l3"><a class="reference internal" href="src.dataset.html">src.dataset package</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">src.model package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#subpackages">Subpackages</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-src.model">Module contents</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="src.test.html">src.test package</a></li>
<li class="toctree-l3"><a class="reference internal" href="src.train.html">src.train package</a></li>
<li class="toctree-l3"><a class="reference internal" href="src.utils.html">src.utils package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="src.html#module-src">Module contents</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Cookiecutter for nussl</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="src.html">src package</a> &raquo;</li>
        
      <li>src.model package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/source/src.model.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="src-model-package">
<h1>src.model package<a class="headerlink" href="#src-model-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="src.model.extras.html">src.model.extras package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="src.model.extras.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="src.model.extras.html#module-src.model.extras.example_module">src.model.extras.example_module module</a></li>
<li class="toctree-l2"><a class="reference internal" href="src.model.extras.html#module-src.model.extras">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="module-src.model">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-src.model" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="src.model.SeparationModel">
<em class="property">class </em><code class="sig-prename descclassname">src.model.</code><code class="sig-name descname">SeparationModel</code><span class="sig-paren">(</span><em class="sig-param">config</em>, <em class="sig-param">extra_modules=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nussl/deep/networks/separation_model.html#SeparationModel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.model.SeparationModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">torch.nn.modules.module.Module</span></code></p>
<dl class="method">
<dt id="src.model.SeparationModel.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">config</em>, <em class="sig-param">extra_modules=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nussl/deep/networks/separation_model.html#SeparationModel.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.model.SeparationModel.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>SeparationModel takes a configuration file or dictionary that describes the model
structure, which is some combination of MelProjection, Embedding, RecurrentStack,
ConvolutionalStack, and other modules found in networks.modules. The configuration file
can be built using the helper functions in config.builders:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>build_dpcl_config: Builds the original deep clustering network, mapping each</dt><dd><p>time-frequency point to an embedding of some size. Takes as input a
log_spectrogram.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>build_mi_config: Builds a “traditional” mask inference network that maps the mixture</dt><dd><p>spectrogram to source estimates.  Takes as input a log_spectrogram and a
magnitude_spectrogram.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>build_chimera_config: Builds a Chimera network with a mask inference head and a</dt><dd><p>deep clustering head to map. A combination of MI and DPCL. Takes as input a
log_spectrogram and a magnitude_spectrogram.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p class="rubric">References</p>
<p>Hershey, J. R., Chen, Z., Le Roux, J., &amp; Watanabe, S. (2016, March).
Deep clustering: Discriminative embeddings for segmentation and separation.
In Acoustics, Speech and Signal Processing (ICASSP),
2016 IEEE International Conference on (pp. 31-35). IEEE.</p>
<p>Luo, Y., Chen, Z., Hershey, J. R., Le Roux, J., &amp; Mesgarani, N. (2017, March).
Deep clustering and conventional networks for music separation: Stronger together.
In Acoustics, Speech and Signal Processing (ICASSP),
2017 IEEE International Conference on (pp. 61-65). IEEE.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>config</strong> – (str, dict) Either a config dictionary built from one of the helper functions,
or the path to a json file containing a config built from the helper functions.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">args</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="s1">&#39;num_frequencies&#39;</span><span class="p">:</span> <span class="mi">512</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="s1">&#39;num_mels&#39;</span><span class="p">:</span> <span class="mi">128</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="s1">&#39;sample_rate&#39;</span><span class="p">:</span> <span class="mi">44100</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="s1">&#39;hidden_size&#39;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="s1">&#39;bidirectional&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="s1">&#39;num_layers&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="s1">&#39;embedding_size&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="s1">&#39;num_sources&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="s1">&#39;embedding_activation&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;sigmoid&#39;</span><span class="p">,</span> <span class="s1">&#39;unitnorm&#39;</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="s1">&#39;mask_activation&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;softmax&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="n">helpers</span><span class="o">.</span><span class="n">build_chimera_config</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;config.json&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">SeparationModel</span><span class="p">(</span><span class="s1">&#39;config.json&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">512</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">from_numpy</span><span class="p">(</span><span class="n">test_data</span><span class="p">)</span><span class="o">.</span><span class="n">float</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">output</span> <span class="o">=</span> <span class="n">model</span><span class="p">({</span><span class="s1">&#39;log_spectrogram&#39;</span><span class="p">:</span> <span class="n">data</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>               <span class="s1">&#39;magnitude_spectrogram&#39;</span><span class="p">:</span> <span class="n">data</span><span class="p">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="src.model.SeparationModel.forward">
<code class="sig-name descname">forward</code><span class="sig-paren">(</span><em class="sig-param">data</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nussl/deep/networks/separation_model.html#SeparationModel.forward"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.model.SeparationModel.forward" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – (dict) a dictionary containing the input data for the model. Should match the input_keys
in self.input.</p>
</dd>
</dl>
<p>Returns:</p>
</dd></dl>

<dl class="method">
<dt id="src.model.SeparationModel.project_data">
<code class="sig-name descname">project_data</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">clamp=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nussl/deep/networks/separation_model.html#SeparationModel.project_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.model.SeparationModel.project_data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="src.model.SeparationModel.save">
<code class="sig-name descname">save</code><span class="sig-paren">(</span><em class="sig-param">location</em>, <em class="sig-param">metadata=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/nussl/deep/networks/separation_model.html#SeparationModel.save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.model.SeparationModel.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves a SeparationModel into a location into a dictionary with the
weights and model configuration.
:param location: (str) Where you want the model saved, as a path.</p>
<p>Returns:</p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="src.model.extras.html" class="btn btn-neutral float-right" title="src.model.extras package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="src.dataset.html" class="btn btn-neutral float-left" title="src.dataset package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Prem Seetharaman

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>