

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>runners package &mdash; Cookiecutter for nussl  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="scripts package" href="scripts.html" />
    <link rel="prev" title="Getting started" href="../getting_started.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Cookiecutter for nussl
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting started</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">runners package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-runners.config">runners.config module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-runners.docker_runner">runners.docker_runner module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-runners.experiment_utils">runners.experiment_utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-runners.script_runner_pool">runners.script_runner_pool module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-runners.utils">runners.utils module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-runners">Module contents</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="scripts.html">scripts package</a></li>
<li class="toctree-l1"><a class="reference internal" href="src.html">src package</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Cookiecutter for nussl</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>runners package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/source/runners.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="runners-package">
<h1>runners package<a class="headerlink" href="#runners-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-runners.config">
<span id="runners-config-module"></span><h2>runners.config module<a class="headerlink" href="#module-runners.config" title="Permalink to this headline">¶</a></h2>
<dl class="data">
<dt id="runners.config.artifacts_directory">
<code class="sig-prename descclassname">runners.config.</code><code class="sig-name descname">artifacts_directory</code><em class="property"> = None</em><a class="headerlink" href="#runners.config.artifacts_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>The experiment scripts all output their results in custom
named folders whose names are randomly generated (by comet.ml).
These folders get saved to mapped to the same location inside the
docker container. Good to know where these are so that you
know where your results are.</p>
</dd></dl>

<dl class="data">
<dt id="runners.config.cache_directory">
<code class="sig-prename descclassname">runners.config.</code><code class="sig-name descname">cache_directory</code><em class="property"> = None</em><a class="headerlink" href="#runners.config.cache_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>The training scripts generate a cache of input/output pairs
for the network. These caches are zarr files that contain
all the input/output for the network and can be substantial
in size. It’s good to know where they are so you can free up
hard drive space from time to time as needed.</p>
</dd></dl>

<dl class="data">
<dt id="runners.config.code_directory">
<code class="sig-prename descclassname">runners.config.</code><code class="sig-name descname">code_directory</code><em class="property"> = None</em><a class="headerlink" href="#runners.config.code_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>This tells the Docker container where the code containing all of
your scripts are. When the container starts, this is the folder you
will be in. You can assume relative paths from the root of this code
directory in your script. It now just uses the current working directory.</p>
</dd></dl>

<dl class="data">
<dt id="runners.config.dataset_directory">
<code class="sig-prename descclassname">runners.config.</code><code class="sig-name descname">dataset_directory</code><em class="property"> = None</em><a class="headerlink" href="#runners.config.dataset_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>This folder is where all of your data lives for training and
evaluating. This folder will be mapped to /storage/data/ in your
docker container, allowing you to write the scripts in reference
to those locations. Make sure you have read/write permissions for
the folder you are pointing to.</p>
</dd></dl>

<dl class="data">
<dt id="runners.config.default_script_args">
<code class="sig-prename descclassname">runners.config.</code><code class="sig-name descname">default_script_args</code><em class="property"> = {'blocking': False, 'num_gpus': 0, 'num_workers': 1, 'run_in': 'host'}</em><a class="headerlink" href="#runners.config.default_script_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Arguments given by default when running a script.</p>
</dd></dl>

<dl class="data">
<dt id="runners.config.nussl_directory">
<code class="sig-prename descclassname">runners.config.</code><code class="sig-name descname">nussl_directory</code><em class="property"> = None</em><a class="headerlink" href="#runners.config.nussl_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>This tells the Docker container where nussl is, so the scripts
can import your version of nussl. This is useful if
are editing nussl continuously and testing it. This is optional
as you could just use the version of nussl on Github. But if
you’re editing core nussl features, this is useful.</p>
</dd></dl>

</div>
<div class="section" id="module-runners.docker_runner">
<span id="runners-docker-runner-module"></span><h2>runners.docker_runner module<a class="headerlink" href="#module-runners.docker_runner" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="runners.docker_runner.DockerRunner">
<em class="property">class </em><code class="sig-prename descclassname">runners.docker_runner.</code><code class="sig-name descname">DockerRunner</code><span class="sig-paren">(</span><em class="sig-param">image=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runners/docker_runner.html#DockerRunner"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#runners.docker_runner.DockerRunner" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class just creates a Docker container from the given image and runs it.
If the image is not specified, it looks in the environment variable called
‘DOCKER_IMAGE_NAME’. If that doesn’t exist, it throws a warning.</p>
<p>If there are gpus available, it uses the NVIDIA docker runtime to access them
through GPU passthrough. If no GPUs are available, it uses the standard runtime.</p>
<p>The class mounts volumes in the host into the container at specified paths. These
paths are specified in config.py and are accessible via environment variables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>image</strong> (<em>str</em>) – Image to use when running inside Docker. If not specified, it
uses whatever is in the environment variable DOCKER_IMAGE_NAME. If that
isn’t specified, it throws a warning.</p>
</dd>
</dl>
<dl class="method">
<dt id="runners.docker_runner.DockerRunner.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">image=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runners/docker_runner.html#DockerRunner.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#runners.docker_runner.DockerRunner.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<dl class="method">
<dt id="runners.docker_runner.DockerRunner.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param">command</em>, <em class="sig-param">gpus</em>, <em class="sig-param">name=None</em>, <em class="sig-param">detach=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runners/docker_runner.html#DockerRunner.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#runners.docker_runner.DockerRunner.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a given command in a Docker container. This detaches from the container
completely by default.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>command</strong> (<em>str</em>) – Command to run inside the container.</p></li>
<li><p><strong>gpus</strong> (<em>str</em>) – What GPUs to use. For example gpus=’0,1,2’ will result in the
container having access to the first 3 GPUs on the system.</p></li>
<li><p><strong>name</strong> (<em>str</em>) – The container should be named something. If name is not provided
(default) then a name is chosen by parsing the command. Docker container
names must be unique.</p></li>
<li><p><strong>detach</strong> (<em>bool</em>) – Whether to detach from the container after launching (running
it in the background) or to stay attached to the container.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-runners.experiment_utils">
<span id="runners-experiment-utils-module"></span><h2>runners.experiment_utils module<a class="headerlink" href="#module-runners.experiment_utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="runners.experiment_utils.load_experiment">
<code class="sig-prename descclassname">runners.experiment_utils.</code><code class="sig-name descname">load_experiment</code><span class="sig-paren">(</span><em class="sig-param">path_to_yml_file</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runners/experiment_utils.html#load_experiment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#runners.experiment_utils.load_experiment" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads an experiment given the path to the configuration file. If there is
no experiment key in the info dictionary in config, then this is an
experiment that should be instantiated. If comet is available, then the
experiment is instantiated by comet. If it is not available, then it is
instantiated by producing a directory with a random name. The name of
this directory is the experiment key used to keep track of artifacts, results,
and so on.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path_to_yml_file</strong> (<em>str</em>) – Path to the yml file containing the experiment
configuration.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>3-element tuple containing</p>
<blockquote>
<div><ul class="simple">
<li><p>config (<em>dict</em>):  A dictionary containing the configuration of the experiment.</p></li>
<li><p>exp (<em>Experiment</em>): An instantiated experiment if comet.ml is needed,  otherwise it is None.</p></li>
<li><p>path_to_yml_file (<em>str</em>): The path to the saved yml file (will be different from the input path if the experiment in the input yml was not yet instantiated).</p></li>
</ul>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="runners.experiment_utils.save_experiment">
<code class="sig-prename descclassname">runners.experiment_utils.</code><code class="sig-name descname">save_experiment</code><span class="sig-paren">(</span><em class="sig-param">config</em>, <em class="sig-param">exp=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runners/experiment_utils.html#save_experiment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#runners.experiment_utils.save_experiment" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves a configuration of an experiment to an experiment directory. If
exp is defined, it is an Experiment object from comet.ml whose parameters will
be updated via config.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>config</strong> (<em>dict</em>) – A dictionary containing the experiment configuration. This
should have all necessary parameters needed to recreate the experiment given
the current codebase.</p></li>
<li><p><strong>exp</strong> (<em>Experiment</em>) – An Experiment object that is used by comet.ml. The settings in
the configuration dictionary are logged to the Experiment object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Path to the yml file that the config was saved to.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-runners.script_runner_pool">
<span id="runners-script-runner-pool-module"></span><h2>runners.script_runner_pool module<a class="headerlink" href="#module-runners.script_runner_pool" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="runners.script_runner_pool.ScriptRunnerPool">
<em class="property">class </em><code class="sig-prename descclassname">runners.script_runner_pool.</code><code class="sig-name descname">ScriptRunnerPool</code><span class="sig-paren">(</span><em class="sig-param">max_workers=10</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runners/script_runner_pool.html#ScriptRunnerPool"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#runners.script_runner_pool.ScriptRunnerPool" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class for launching scripts in sequence or parallel with corresponding
arguments. Keeps track of GPU resources for allocating jobs, takes care of
blocking on certain jobs (e.g. dataset generation), and so on. Called by
scripts/pipeline.yml or by ‘make pipeline yml=path/to/.yml’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>max_workers</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of workers to use in the pool.
Controls how many jobs run at the same time. Defaults to 10.</p>
</dd>
</dl>
<dl class="method">
<dt id="runners.script_runner_pool.ScriptRunnerPool.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">max_workers=10</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runners/script_runner_pool.html#ScriptRunnerPool.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#runners.script_runner_pool.ScriptRunnerPool.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<dl class="method">
<dt id="runners.script_runner_pool.ScriptRunnerPool.submit">
<code class="sig-name descname">submit</code><span class="sig-paren">(</span><em class="sig-param">scripts</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runners/script_runner_pool.html#ScriptRunnerPool.submit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#runners.script_runner_pool.ScriptRunnerPool.submit" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes in a list of scripts and allocates each of them to a ThreadPoolExecutor.
Each script is run via the Makefile, so each thread spawns a process by using
subprocess.run (see <a class="reference internal" href="#runners.script_runner_pool.job_runner" title="runners.script_runner_pool.job_runner"><code class="xref py py-meth docutils literal notranslate"><span class="pre">runners.script_runner_pool.job_runner()</span></code></a>)</p>
<p>The logic of this script is to go through every script in order. If the script
is blocking, then it will wait until the script finishes executing before
moving on to the next script. If the script requires GPU (num_gpus &gt; 0), it
will check the availability of GPUs using GPUtil and only schedule the job
to be run if there is an available GPU for it. If not, it will try again
every 5 seconds until all jobs have been scheduled.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>scripts</strong> (<em>list</em>) – A list of configurations for scripts that get run.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="runners.script_runner_pool.job_runner">
<code class="sig-prename descclassname">runners.script_runner_pool.</code><code class="sig-name descname">job_runner</code><span class="sig-paren">(</span><em class="sig-param">script</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runners/script_runner_pool.html#job_runner"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#runners.script_runner_pool.job_runner" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs a single script in a subprocess. Uses the Makefile to run the script
(which is always a Python script). The Makefile can run things either in the
container or on the host.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>script</strong> (<em>dict</em>) – Configuration for the script.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-runners.utils">
<span id="runners-utils-module"></span><h2>runners.utils module<a class="headerlink" href="#module-runners.utils" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="runners.utils.build_parser_for_yml_script">
<code class="sig-prename descclassname">runners.utils.</code><code class="sig-name descname">build_parser_for_yml_script</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runners/utils.html#build_parser_for_yml_script"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#runners.utils.build_parser_for_yml_script" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds an ArgumentParser with a common setup. Used in the
scripts.</p>
</dd></dl>

<dl class="function">
<dt id="runners.utils.deep_update">
<code class="sig-prename descclassname">runners.utils.</code><code class="sig-name descname">deep_update</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">overrides</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runners/utils.html#deep_update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#runners.utils.deep_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update a nested dictionary or similar mapping.
Modify <code class="docutils literal notranslate"><span class="pre">source</span></code> in place.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source</strong> (<em>dict</em>) – Source dictionary that gets updated</p></li>
<li><p><strong>overrides</strong> (<em>dict</em>) – Dictionary with items to update in source
dict.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Updated source dictionary.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>(dict)</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="runners.utils.disp_script">
<code class="sig-prename descclassname">runners.utils.</code><code class="sig-name descname">disp_script</code><span class="sig-paren">(</span><em class="sig-param">spec</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runners/utils.html#disp_script"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#runners.utils.disp_script" title="Permalink to this definition">¶</a></dt>
<dd><p>Displays the arguments for a script in a readable fashion in
logging.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>spec</strong> (<em>dict</em>) – Dictionary containing script parameters.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="runners.utils.dump_yaml">
<code class="sig-prename descclassname">runners.utils.</code><code class="sig-name descname">dump_yaml</code><span class="sig-paren">(</span><em class="sig-param">data</em>, <em class="sig-param">path_to_yml</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runners/utils.html#dump_yaml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#runners.utils.dump_yaml" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump data to a yml file at a specified location.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>obj</em>) – Whatever data to dump to the yml file, as long as it can be
serialized to YAML. Typically a dictionary.</p></li>
<li><p><strong>path_to_yml</strong> (<em>str</em>) – Where to save the data.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="data">
<dt id="runners.utils.env_variables">
<code class="sig-prename descclassname">runners.utils.</code><code class="sig-name descname">env_variables</code><em class="property"> = ['DATA_DIRECTORY', 'CACHE_DIRECTORY', 'ARTIFACTS_DIRECTORY', 'NUSSL_DIRECTORY']</em><a class="headerlink" href="#runners.utils.env_variables" title="Permalink to this definition">¶</a></dt>
<dd><p>List of environment variables to look for and replace.</p>
</dd></dl>

<dl class="function">
<dt id="runners.utils.flatten">
<code class="sig-prename descclassname">runners.utils.</code><code class="sig-name descname">flatten</code><span class="sig-paren">(</span><em class="sig-param">d</em>, <em class="sig-param">parent_key=''</em>, <em class="sig-param">sep='_'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runners/utils.html#flatten"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#runners.utils.flatten" title="Permalink to this definition">¶</a></dt>
<dd><p>Flattens a dictionary so that it only has one level. A sequence of keys
will result in a key that is like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="n">key1_key2_key3</span><span class="p">:</span> <span class="n">value</span> <span class="p">}</span>
</pre></div>
</div>
<p>from:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="n">key1</span><span class="p">:</span> <span class="p">{</span><span class="n">key2</span><span class="p">:</span> <span class="p">{</span><span class="n">key3</span><span class="p">:</span> <span class="n">val</span><span class="p">}</span> <span class="p">}</span> <span class="p">}</span>
</pre></div>
</div>
<p>This is done recursively.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d</strong> (<em>[</em><em>type</em><em>]</em>) – Dictionary that is being flattened.</p></li>
<li><p><strong>parent_key</strong> (<em>str</em><em>, </em><em>optional</em>) – The key above this one (used in recursion).
Defaults to ‘’.</p></li>
<li><p><strong>sep</strong> (<em>str</em><em>, </em><em>optional</em>) – Delimiter between keys. Defaults to ‘_’.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>flattened dictionary</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="runners.utils.load_yaml">
<code class="sig-prename descclassname">runners.utils.</code><code class="sig-name descname">load_yaml</code><span class="sig-paren">(</span><em class="sig-param">path_to_yml, env_variables=['DATA_DIRECTORY', 'CACHE_DIRECTORY', 'ARTIFACTS_DIRECTORY', 'NUSSL_DIRECTORY']</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runners/utils.html#load_yaml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#runners.utils.load_yaml" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a YAML file and modifies it according to the environment variables using
<a class="reference internal" href="#runners.utils.modify_yml_with_env" title="runners.utils.modify_yml_with_env"><code class="xref py py-func docutils literal notranslate"><span class="pre">runners.utils.modify_yml_with_env()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path_to_yml</strong> (<em>str</em>) – Path to the YML file.</p></li>
<li><p><strong>env_variables</strong> (<em>list</em>) – A list of strings containing what environment variables
to replace.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Parsed and loaded YAML into a dictionary.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="runners.utils.make_random_string">
<code class="sig-prename descclassname">runners.utils.</code><code class="sig-name descname">make_random_string</code><span class="sig-paren">(</span><em class="sig-param">length=10</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runners/utils.html#make_random_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#runners.utils.make_random_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a random alphanumeric string of some length</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>length</strong> (<em>int</em><em>, </em><em>optional</em>) – Length of the random string to return. Defaults to 10.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Random alphanumeric string of the specified length.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="runners.utils.modify_yml_with_env">
<code class="sig-prename descclassname">runners.utils.</code><code class="sig-name descname">modify_yml_with_env</code><span class="sig-paren">(</span><em class="sig-param">yml</em>, <em class="sig-param">env_variables</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runners/utils.html#modify_yml_with_env"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#runners.utils.modify_yml_with_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Replaces specific substrings in a string or elsewhere with
their corresponding environment variables. The environment variables it currently
replaces are: DATA_DIRECTORY, CACHE_DIRECTORY, ARTIFACTS_DIRECTORY, and
NUSSL_DIRECTORY. Descriptions of these are in setup/environment/default.sh.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>yml</strong> (<em>str</em>) – A string containing the YML code (unparsed). Things in curly braces
in the string are modified by passing in the data in <a class="reference internal" href="#runners.utils.env_variables" title="runners.utils.env_variables"><code class="xref py py-obj docutils literal notranslate"><span class="pre">runners.utils.env_variables</span></code></a>.</p></li>
<li><p><strong>env_variables</strong> (<em>list</em>) – A list of strings containing what environment variables
to replace.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>YML string with the environment variables replaced.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="runners.utils.parse_yaml">
<code class="sig-prename descclassname">runners.utils.</code><code class="sig-name descname">parse_yaml</code><span class="sig-paren">(</span><em class="sig-param">path_to_yml</em>, <em class="sig-param">jobs=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runners/utils.html#parse_yaml"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#runners.utils.parse_yaml" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses a YAML file, replacing necessary environment variables and putting
it in an expected form for the scripts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path_to_yml</strong> (<em>str</em>) – Path to yml file to be parsed.</p></li>
<li><p><strong>jobs</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to convert it so that it’s a sequence
of jobs if <cite>jobs</cite> is not defined in spec. Defaults to True.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>Loaded dictionay, modified by environment variables and depending on</dt><dd><p>jobs.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="runners.utils.prepare_script_args">
<code class="sig-prename descclassname">runners.utils.</code><code class="sig-name descname">prepare_script_args</code><span class="sig-paren">(</span><em class="sig-param">spec</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/runners/utils.html#prepare_script_args"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#runners.utils.prepare_script_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses the default script args if those items are not specified for
the script.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>spec</strong> (<em>dict</em>) – Script args to modify with defaults as needed.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Modified dictionary with values as needed.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-runners">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-runners" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="scripts.html" class="btn btn-neutral float-right" title="scripts package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../getting_started.html" class="btn btn-neutral float-left" title="Getting started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Prem Seetharaman

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>